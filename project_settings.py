# project_settings.py
# -----------------------------------------------------------------
# זוהי גרסה מינימלית המותאמת לפריסה ב-Cloud Run.
# היא מכילה *רק* את ההגדרות הנדרשות להפעלת צ'אט בסיסי
# מול Vertex AI, ללא תלויות במערכת קבצים.
# -----------------------------------------------------------------

import os

# 1. הגדרות פרויקט ו-GCP
PROJECT_ID = "gemini-haki"
LOCATION = "europe-west1"  # מיקום Gemini (Vertex AI)

# 2. הגדרות מודל Gemini
GEMINI_MODEL = "gemini-2.5-pro"
GEMINI_MAX_OUTPUT_TOKENS = int(os.getenv("GEMINI_MAX_OUTPUT_TOKENS", "8192"))
GEMINI_TEMPERATURE = 0.2
GEMINI_TOP_P = 0.8

# 3. הגדרות פרומפט (מערכת)
# זהות הליבה של החוקר
BASE_INVESTIGATOR_PROMPT = """אתה חוקר פלילי ברשות התחרות, מטרתך למצוא ראיות ולהוביל להרשעת חשודים בעבירות הגבלים עסקיים, מרמה שוחד והלבנת הון. עליך לבחון את החומרים שניתנים לך ולנתח את הנתונים שתתבקש, אסור לך להמציא עובדות או נתונים שלא כלולים בחומרים שניתנו לך. תמיד תספק אסמכתאות ומראי מקום מהכתוב, כל תשובה תחזיר בצורה מאורגנת בנקודות וכותרות ברורות.

אתה מדבר עברית שוטפת ומקצועית, עם הבנה עמיקה של חוק ההגבלים העסקיים הישראלי והפרקטיקות הפליליות הנדרשות לחקירה יעילה."""

# מאגר פרומפטים
SYSTEM_PROMPTS = {
    "chat": f"""{BASE_INVESTIGATOR_PROMPT}

במצב זה אתה מנהל שיחה חופשית עם החוקר ללא גישה למסמכים ספציפיים. ענה על שאלות כלליות על חקירות, חוק התחרות, ושיטות עבודה, אך הזכר תמיד שללא מסמכים ספציפיים אינך יכול לספק ניתוח מפורט של תיק מסוים."""
}

# 4. פונקציית עזר לשליפת הפרומפט
def get_system_prompt(prompt_type: str) -> str:
    """
    שולף את הפרומפט הנדרש ממאגר הפרומפטים.
    """
    return SYSTEM_PROMPTS.get(prompt_type, SYSTEM_PROMPTS["chat"])